# Create Payment

**POST** `https://api.monei.com/v1/payments`

Creates a new payment with the specified parameters.

You can create a payment in two ways:

- **Immediate processing**: Provide a `paymentToken` or `paymentMethod` - The payment will be processed instantly
- **Deferred processing**: Create without payment details - The payment remains in **PENDING** status until you confirm it later using the confirm endpoint

When creating a payment without payment details, you can redirect customers to the hosted payment page where they can select their preferred payment method and complete the transaction.

For immediate processing, use one of these token options:

- A temporary `paymentToken` generated on the frontend using **monei.js Components**
- A permanent `paymentToken` from a previous successful payment (when `generatePaymentToken: true` was included)

Permanent tokens enable one-click checkout experiences for returning customers by allowing you to securely store and reuse payment details without requiring customers to re-enter their information.

## Request

**Content-Type**: `application/json`

### Body (required)

| Field | Type | Description | Example |
|-------|------|-------------|---------|
| **amount** | int32 (required) | Amount intended to be collected by this payment. A positive integer representing how much to charge in the smallest currency unit (e.g., 100 cents to charge 1.00 USD). | 110 |
| **currency** | Payment-Currency (string, required) | Three-letter ISO currency code, in uppercase. Must be a supported currency. | EUR |
| **orderId** | Payment-OrderId (string, required) | An order ID from your system. A unique identifier that can be used to reconcile the payment with your internal system. | 14379133960355 |
| **callbackUrl** | Payment-CallbackUrl (string) | The URL to which a payment result should be sent asynchronously. | `https://example.com/checkout/callback` |
| **completeUrl** | Payment-CompleteUrl (string) | The URL the customer will be directed to after transaction completed (successful or failed - except if `failUrl` is provided). | `https://example.com/checkout/complete` |
| **failUrl** | Payment-FailUrl (string) | The URL the customer will be directed to after transaction has failed, instead of `completeUrl` (used in hosted payment page). This allows to provide two different URLs for successful and failed payments. | `https://example.com/checkout/fail` |
| **cancelUrl** | Payment-CancelUrl (string) | The URL the customer will be directed to if they decide to cancel payment and return to your website (used in hosted payment page). | `https://example.com/checkout/cancel` |
| **paymentToken** | Payment-PaymentToken (string) | A payment token generated by **monei.js Components** or a `paymentToken` saved after a previous successful payment. In case of the first one, you will also need to send the `sessionId` used to generate the token in the first place. | `7cc38b08ff471ccd313ad62b23b9f362b107560b` |
| **sessionId** | Payment-SessionId (string) | A unique identifier within your system that adds security to the payment process. You need to pass the same session ID as the one used on the frontend to initialize MONEI Component (if you needed to). This is required if a payment token (not permanent) was already generated in the frontend. | `39603551437913` |
| **generatePaymentToken** | Payment-GeneratePaymentToken (boolean) | If set to `true`, a permanent token that represents a payment method used in the payment will be generated. | Default: `false`<br>Example: `false` |
| **paymentMethod** | object | An information about a payment method used for this payment. We recommend using `paymentToken` instead, as it is a more secure way to pass sensitive payment information. Processing credit card information on your server requires PCI DSS compliance. | |
| **paymentMethod.card** | object | Details about the card used as payment method. If provided, MONEI will try to confirm the payment directly. | |
| **paymentMethod.card.number** | string | The card number, as a string without any separators. | |
| **paymentMethod.card.cvc** | string | Card security code. | |
| **paymentMethod.card.expMonth** | string | Two-digit number representing the card's expiration month. | |
| **paymentMethod.card.expYear** | string | Two-digit number representing the card's expiration year. | |
| **paymentMethod.card.cardholderName** | CardholderName (string) | The cardholder's name, as stated in the credit card. | `John Doe` |
| **paymentMethod.card.cardholderEmail** | CardholderEmail (string) | The cardholder's email address. | `john.doe@monei.com` |
| **paymentMethod.bizum** | object | Details about the Bizum account used for this payment. If provided phone number is valid and registered in Bizum, MONEI will try to confirm the payment directly. | |
| **paymentMethod.bizum.phoneNumber** | string | Phone number in E.164 format used to pay with Bizum. | `null` |
| **allowedPaymentMethods** | string[] | An array of allowed payment methods (used in hosted payment page). Must be enabled payment methods. | `["card","bizum","paypal"]` |
| | | Enum Values: `alipay`, `card`, `bizum`, `paypal`, `mbway`, `multibanco`, `iDeal`, `bancontact`, `sofort`, `trustly`, `sepa`, `klarna`, `giropay`, `eps`, `blik` | |
| **transactionType** | Payment-TransactionType (string) | Controls when the funds will be captured. | Default: `SALE`<br>Example: `SALE` |
| | | Enum Values: `SALE` (Automatically captures funds when the customer authorizes the payment), `AUTH` (Places a hold on funds without immediate capture, allowing for later capture), `PAYOUT` (Sends funds to the customer), `VERIF` (Verifies the payment method without placing a hold or capturing funds) | |
| **sequence** | object | This field needs to be sent in order to mark the beginning of a sequence of payments (recurring/subscriptions, installments, and so). Specific configurations can be set in the inside properties (recurring). | |
| **sequence.type** | string (required) | Possible values: `recurring` | `recurring` |
| **sequence.recurring** | object | Specific configurations for recurring payments. Will only be used when `sequence.type` is `recurring`. | |
| **sequence.recurring.expiry** | string | Date after which no further recurring payments will be performed. Must be formatted as `YYYYMMDD`. | Default: *(The payment method or card expiration)*<br>Example: `20210630` |
| **sequence.recurring.frequency** | int32 | The minimum number of days between the different recurring payments. | Default: `25`<br>Example: `30` |
| **storeId** | Payment-StoreId (string) | A unique identifier of the Store. If specified, the payment is attached to this Store. | `e5f28150d9e8974c58ab5ec9c4a880f8734dcf05` |
| **pointOfSaleId** | Payment-PointOfSaleId (string) | A unique identifier of the Point of Sale. If specified, the payment is attached to this Point of Sale. If there is a QR code attached to the same Point of Sale, this payment will be available by scanning the QR code. | `fb269cccfa0cc021f5d0b8eb1421646c696213e1` |
| **subscriptionId** | Payment-SubscriptionId (string) | A unique identifier of the Subscription. If specified, the payment is attached to this Subscription. | `575bcd84-09fc-4a6e-8c4c-f88b8eb90bfa` |
| **autoRecover** | Payment-AutoRecover (boolean) | If set to `true`, the new payment will be automatically created when customer visits the payment link of the previously failed payment. Is automatically set to `true` if `completeUrl` is not provided (set this value to `true` to create "Pay By Link" payments). | `false` |
| **description** | Payment-Description (string) | An arbitrary string attached to the payment. Often useful for displaying to users. | `Test Shop - #84370745531439` |
| **customer** | object | | |
| **customer.email** | string | The customer's email address. | `john.doe@example.com` |
| **customer.name** | string | The customer's full name or business name. | `John Doe` |
| **customer.phone** | string | The customer's phone number in E.164 format. | `null` |
| **billingDetails** | object | Billing information associated with the payment method at the time of the transaction. | |
| **billingDetails.name** | string | The customer's billing full name. | `John Doe` |
| **billingDetails.email** | string | The customer's billing email address. | `john.doe@example.com` |
| **billingDetails.phone** | string | The customer's billing phone number in E.164 format. | `null` |
| **billingDetails.company** | string | Billing company name. | `null` |
| **billingDetails.taxId** | string | Company tax ID. | `null` |
| **billingDetails.address** | object | | |
| **shippingDetails** | object | Shipping information associated with the payment. | |
| **shippingDetails.name** | string | The shipping customer's full name. | `John Doe` |
| **shippingDetails.email** | string | The shipping customer's email address. | `john.doe@example.com` |
| **shippingDetails.phone** | string | The shipping customer's phone number in E.164 format. | `null` |
| **shippingDetails.company** | string | Name of the company where the shipment is going. | `null` |
| **shippingDetails.taxId** | string | Company tax ID. | `null` |
| **shippingDetails.address** | object | | |
| **sessionDetails** | Payment-SessionDetails | Information related to the browsing session of the user who initiated the payment. | |
| **sessionDetails.ip** | IP (string) | The IP address where the operation originated. | `100.100.200.100` |
| **sessionDetails.countryCode** | Country (string) | Two-letter country code (ISO 3166-1 alpha-2). | `ES` |
| **sessionDetails.lang** | Lang (string) | Two-letter language code (ISO 639-1). | `es` |
| **sessionDetails.deviceType** | DeviceType (string) | Device type, could be `desktop`, `mobile`, `smartTV`, `tablet`. | `desktop` |
| **sessionDetails.deviceModel** | DeviceModel (string) | Information about the device used for the browser session (e.g., `iPhone`). | `null` |
| **sessionDetails.browser** | Browser (string) | The browser used in this browser session (e.g., `Mobile Safari`). | `Chrome` |
| **sessionDetails.browserVersion** | BrowserVersion (string) | The version for the browser session (e.g., `13.1.1`). | `83.0.4103.116` |
| **sessionDetails.os** | Os (string) | Operation system (e.g., `iOS`). | `Mac OS` |
| **sessionDetails.osVersion** | OsVersion (string) | Operation system version (e.g., `13.5.1`). | `10.15.4` |
| **sessionDetails.source** | Source (string) | The source component from where the operation was generated (mostly for our SDK's). | `MONEI/PHP` |
| **sessionDetails.sourceVersion** | SourceVersion (string) | The source component version from where the operation was generated (mostly for our SDK's). | `0.1.2` |
| **sessionDetails.userAgent** | UserAgent (string) | Full user agent string of the browser session. | `Mozilla/5.0 (Windows NT 10.0; Win64; x64) ...` |
| **sessionDetails.browserAccept** | BrowserAccept (string) | Browser accept header. | `text/html,application/xhtml+xml,application/json` |
| **sessionDetails.browserColorDepth** | BrowserColorDepth (string) | The color depth of the browser session (e.g., `24`). | `24` |
| **sessionDetails.browserScreenHeight** | BrowserScreenHeight (string) | The screen height of the browser session (e.g., `1152`). | `1152` |
| **sessionDetails.browserScreenWidth** | BrowserScreenWidth (string) | The screen width of the browser session (e.g., `2048`). | `2048` |
| **sessionDetails.browserTimezoneOffset** | BrowserTimezoneOffset (string) | The timezone offset of the browser session (e.g., `-120`). | `-120` |
| **expireAt** | int64 | Payment expiration time. | `1663581391` |
| **metadata** | object | A set of key-value pairs that you can attach to a resource. This can be useful for storing additional information about the resource in a structured format. | `{"systemId":"12345"}` |

## Responses

| Status Code | Description |
|-------------|-------------|
| 200 | A payment object |
| 400 | Bad Request |
| 401 | Unauthorized |
| 404 | Not Found |
| 422 | Unprocessable Entity |
| 500 | Internal Server Error |
| 503 | Service Unavailable |

### Response Schema (200)

**Content-Type**: `application/json`

```json
{
  "id": "af6029f80f5fc73a8ad2753eea0b1be0",
  "amount": 110,
  "currency": "EUR",
  "orderId": "14379133960355",
  "description": "Test Shop - #84370745531439",
  "accountId": "aa9333ba-82de-400c-9ae7-087b9f8d2242",
  "authorizationCode": "475816",
  "livemode": false,
  "status": "PENDING",
  "statusCode": "E000",
  "statusMessage": "Transaction approved",
  "customer": {
    "email": "john.doe@example.com",
    "name": "John Doe",
    "phone": null
  },
  "shop": {
    "name": "Test Shop",
    "country": "ES"
  },
  "billingDetails": {
    "name": "John Doe",
    "email": "john.doe@example.com",
    "phone": null,
    "company": null,
    "taxId": null,
    "address": {
      "country": "ES",
      "city": "Málaga",
      "line1": "Fake Street 123",
      "line2": null,
      "zip": "1234",
      "state": "Málaga"
    }
  },
  "shippingDetails": {
    "name": "John Doe",
    "email": "john.doe@example.com",
    "phone": null,
    "company": null,
    "taxId": null,
    "address": {
      "country": "ES",
      "city": "Málaga",
      "line1": "Fake Street 123",
      "line2": null,
      "zip": "1234",
      "state": "Málaga"
    }
  },
  "refundedAmount": null,
  "lastRefundAmount": null,
  "lastRefundReason": null,
  "cancellationReason": null,
  "sessionDetails": {
    "ip": "100.100.200.100",
    "countryCode": "ES",
    "lang": "es",
    "deviceType": "desktop",
    "deviceModel": null,
    "browser": "Chrome",
    "browserVersion": "83.0.4103.116",
    "os": "Mac OS",
    "osVersion": "10.15.4",
    "source": "MONEI/PHP",
    "sourceVersion": "0.1.2",
    "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) ...",
    "browserAccept": "text/html,application/xhtml+xml,application/json",
    "browserColorDepth": "24",
    "browserScreenHeight": "1152",
    "browserScreenWidth": "2048",
    "browserTimezoneOffset": "-120"
  },
  "traceDetails": {
    "ip": "100.100.200.100",
    "countryCode": "ES",
    "lang": "es",
    "deviceType": "desktop",
    "deviceModel": null,
    "browser": "Chrome",
    "browserVersion": "83.0.4103.116",
    "os": "Mac OS",
    "osVersion": "10.15.4",
    "source": "MONEI/PHP",
    "sourceVersion": "0.1.2",
    "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) ...",
    "browserAccept": "text/html,application/xhtml+xml,application/json",
    "browserColorDepth": "24",
    "browserScreenHeight": "1152",
    "browserScreenWidth": "2048",
    "browserTimezoneOffset": "-120",
    "userId": null,
    "userEmail": "user@example.com"
  },
  "paymentToken": "7cc38b08ff471ccd313ad62b23b9f362b107560b",
  "paymentMethod": {
    "method": "card",
    "card": {
      "country": "ES",
      "brand": "visa",
      "type": "credit",
      "threeDSecure": false,
      "threeDSecureVersion": "2.1.0",
      "threeDSecureFlow": "CHALLENGE",
      "expiration": 2048544000,
      "last4": "0004",
      "tokenizationMethod": "applePay",
      "cardholderName": "John Doe",
      "cardholderEmail": "email@example.com"
    },
    "bizum": {
      "phoneNumber": null
    },
    "paypal": {
      "orderId": "7XP21983KL5672104",
      "payerId": "QWRTNBFHZXLPD",
      "email": "john.doe@example.com",
      "name": "John Doe"
    },
    "mbway": {
      "phoneNumber": null
    },
    "trustly": {
      "customerId": null
    },
    "sepa": {
      "accountholderAddress": null,
      "accountholderEmail": null,
      "accountholderName": null,
      "countryCode": null,
      "bankAddress": null,
      "bankCode": null,
      "bankName": null,
      "bic": null,
      "last4": null
    },
    "klarna": {
      "billingCategory": "PAY_LATER",
      "authPaymentMethod": "card"
    }
  },
  "sequence": {
    "type": "recurring",
    "recurring": {
      "expiry": "20210630",
      "frequency": 30
    }
  },
  "sequenceId": "62b23b9f3627cc38b08ff471ccd313ad",
  "storeId": "e5f28150d9e8974c58ab5ec9c4a880f8734dcf05",
  "pointOfSaleId": "fb269cccfa0cc021f5d0b8eb1421646c696213e1",
  "metadata": {
    "systemId": "12345"
  },
  "nextAction": {
    "type": "CONFIRM",
    "mustRedirect": false,
    "redirectUrl": "https://secure.monei.com/payments/af6029f80f5fc73a8ad2753eea0b1be0"
  },
  "createdAt": 1636366897,
  "updatedAt": 1636366897
}
```

## Example Request

```bash
curl -L 'https://api.monei.com/v1/payments' \
-H 'Content-Type: application/json' \
-H 'Accept: application/json' \
-H 'Authorization: <Authorization>' \
--data-raw '{
  "amount": 110,
  "currency": "EUR",
  "orderId": "14379133960355",
  "callbackUrl": "https://example.com/checkout/callback",
  "completeUrl": "https://example.com/checkout/complete",
  "failUrl": "https://example.com/checkout/fail",
  "cancelUrl": "https://example.com/checkout/cancel",
  "paymentToken": "7cc38b08ff471ccd313ad62b23b9f362b107560b",
  "sessionId": "39603551437913",
  "generatePaymentToken": false,
  "paymentMethod": {
    "card": {
      "number": "string",
      "cvc": "string",
      "expMonth": "string",
      "expYear": "string",
      "cardholderName": "John Doe",
      "cardholderEmail": "john.doe@monei.com"
    },
    "bizum": {
      "phoneNumber": null
    }
  },
  "allowedPaymentMethods": [
    "card",
    "bizum",
    "paypal"
  ],
  "transactionType": "SALE",
  "sequence": {
    "type": "recurring",
    "recurring": {
      "expiry": "20210630",
      "frequency": 30
    }
  },
  "storeId": "e5f28150d9e8974c58ab5ec9c4a880f8734dcf05",
  "pointOfSaleId": "fb269cccfa0cc021f5d0b8eb1421646c696213e1",
  "subscriptionId": "575bcd84-09fc-4a6e-8c4c-f88b8eb90bfa",
  "autoRecover": false,
  "description": "Test Shop - #84370745531439",
  "customer": {
    "email": "john.doe@example.com",
    "name": "John Doe",
    "phone": null
  },
  "billingDetails": {
    "name": "John Doe",
    "email": "john.doe@example.com",
    "phone": null,
    "company": null,
    "taxId": null,
    "address": {
      "country": "ES",
      "city": "Málaga",
      "line1": "Fake Street 123",
      "line2": null,
      "zip": "1234",
      "state": "Málaga"
    }
  },
  "shippingDetails": {
    "name": "John Doe",
    "email": "john.doe@example.com",
    "phone": null,
    "company": null,
    "taxId": null,
    "address": {
      "country": "ES",
      "city": "Málaga",
      "line1": "Fake Street 123",
      "line2": null,
      "zip": "1234",
      "state": "Málaga"
    }
  },
  "sessionDetails": {
    "ip": "100.100.200.100",
    "countryCode": "ES",
    "lang": "es",
    "deviceType": "desktop",
    "deviceModel": null,
    "browser": "Chrome",
    "browserVersion": "83.0.4103.116",
    "os": "Mac OS",
    "osVersion": "10.15.4",
    "source": "MONEI/PHP",
    "sourceVersion": "0.1.2",
    "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) ...",
    "browserAccept": "text/html,application/xhtml+xml,application/json",
    "browserColorDepth": "24",
    "browserScreenHeight": "1152",
    "browserScreenWidth": "2048",
    "browserTimezoneOffset": "-120"
  },
  "expireAt": 1663581391,
  "metadata": {
    "systemId": "12345"
  }
}'
```